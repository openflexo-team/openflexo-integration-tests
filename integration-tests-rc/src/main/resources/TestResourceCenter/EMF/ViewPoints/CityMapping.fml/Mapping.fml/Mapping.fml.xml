<?xml version="1.0" encoding="UTF-8"?>
<VirtualModel id="0" modelVersion="1.0" URI="http://www.thalesgroup.com/openflexo/emf/CityMapping/Mapping.fml" version="0.1" name="Mapping" userID="FLX" flexoID="264">
  <FlexoConcept id="1" name="City" userID="FLX" flexoID="35">
    <Inspector id="2" renderer="((instance.cityInModel1 != null) ? ((instance.cityInModel2 != null) ? (instance.cityInModel1.name + &quot; [sync]&quot;) : (instance.cityInModel1.name + &quot; [model1]&quot;)) : (instance.cityInModel2.name + &quot; [model2]&quot;))" inspectorTitle="City" userID="FLX" flexoID="1" />
    <EMFObjectIndividualRole id="3" ontologicType="http://www.thalesgroup.com/openflexo/emf/model/city1/City" container="model1" cloningStrategy="Clone" cardinality="ZeroOne" name="cityInModel1" userID="FLX" flexoID="33" />
    <EMFObjectIndividualRole id="4" ontologicType="http://www.thalesgroup.com/openflexo/emf/model/city2/City" container="model2" cloningStrategy="Clone" cardinality="ZeroOne" name="cityInModel2" userID="FLX" flexoID="34" />
    <CreationScheme id="5" skipConfirmationPanel="false" name="createFromEMF" width="800" label="Creation form Existing EMF Individuals" height="600" description="" userID="FLX" flexoID="4">
      <BehaviourControlGraph_Sequence id="6" userID="FLX" flexoID="230">
        <ControlGraph2_AssignationAction id="7" assign="cityInModel2" ownerContext="controlGraph2" userID="FLX" flexoID="233">
          <AssignableAction_ExpressionAction id="8" expression="parameters.cityInModel2" userID="FLX" flexoID="234" />
        </ControlGraph2_AssignationAction>
        <ControlGraph1_AssignationAction id="9" assign="cityInModel1" ownerContext="controlGraph1" userID="FLX" flexoID="231">
          <AssignableAction_ExpressionAction id="10" expression="parameters.cityInModel1" userID="FLX" flexoID="232" />
        </ControlGraph1_AssignationAction>
      </BehaviourControlGraph_Sequence>
      <GenericBehaviourParameter id="11" widget="CUSTOM_WIDGET" name="cityInModel1" type="org.openflexo.foundation.ontology.IFlexoOntologyIndividual" userID="FLX" flexoID="283" />
      <GenericBehaviourParameter id="12" widget="CUSTOM_WIDGET" name="cityInModel2" type="org.openflexo.foundation.ontology.IFlexoOntologyIndividual" userID="FLX" flexoID="284" />
    </CreationScheme>
    <ActionScheme id="13" conditional="(cityInModel2 = null)" name="generateModel2FromModel1" width="800" label="generateModel2FromModel1" height="600" userID="FLX" flexoID="5">
      <BehaviourControlGraph_AssignationAction id="14" assign="cityInModel2" userID="FLX" flexoID="235">
        <AssignableAction_AddEMFObjectIndividual id="15" receiver="model2" assignation="cityInModel2" userID="FLX" flexoID="38">
          <DataPropertyAssertion id="16" value="cityInModel1.name" dataPropertyURI="http://www.thalesgroup.com/openflexo/emf/model/city2/City/name" userID="FLX" flexoID="39" />
        </AssignableAction_AddEMFObjectIndividual>
      </BehaviourControlGraph_AssignationAction>
    </ActionScheme>
    <ActionScheme id="17" conditional="(cityInModel1 = null)" skipConfirmationPanel="false" name="generateModel1FromModel2" width="800" label="generateModel1FromModel2" height="600" userID="FLX" flexoID="6">
      <BehaviourControlGraph_AssignationAction id="18" assign="cityInModel1" userID="FLX" flexoID="236">
        <AssignableAction_AddEMFObjectIndividual id="19" receiver="model1" assignation="cityInModel1" userID="FLX" flexoID="40">
          <DataPropertyAssertion id="20" value="cityInModel2.name" dataPropertyURI="http://www.thalesgroup.com/openflexo/emf/model/city1/City/name" userID="FLX" flexoID="41" />
        </AssignableAction_AddEMFObjectIndividual>
      </BehaviourControlGraph_AssignationAction>
    </ActionScheme>
    <DeletionScheme id="21" skipConfirmationPanel="false" name="deletion" width="800" label="deletion" height="600" userID="FLX" flexoID="7">
      <BehaviourControlGraph_Sequence id="22" userID="FLX" flexoID="237">
        <ControlGraph2_DeleteAction id="23" object="cityInModel2" ownerContext="controlGraph2" userID="FLX" flexoID="43" />
        <ControlGraph1_DeleteAction id="24" object="cityInModel1" ownerContext="controlGraph1" userID="FLX" flexoID="42" />
      </BehaviourControlGraph_Sequence>
    </DeletionScheme>
    <CreationScheme id="25" skipConfirmationPanel="false" name="createANewOne" width="800" label="createANewOne" height="600" userID="FLX" flexoID="189">
      <BehaviourControlGraph_Sequence id="26" userID="FLX" flexoID="238">
        <ControlGraph2_AssignationAction id="27" assign="cityInModel2" ownerContext="controlGraph2" userID="FLX" flexoID="240">
          <AssignableAction_AddEMFObjectIndividual id="28" receiver="model2" assignation="cityInModel2" userID="FLX" flexoID="228">
            <DataPropertyAssertion id="29" value="parameters.cityName" dataPropertyURI="http://www.thalesgroup.com/openflexo/emf/model/city2/City/name" userID="FLX" flexoID="229" />
          </AssignableAction_AddEMFObjectIndividual>
        </ControlGraph2_AssignationAction>
        <ControlGraph1_AssignationAction id="30" assign="cityInModel1" ownerContext="controlGraph1" userID="FLX" flexoID="239">
          <AssignableAction_AddEMFObjectIndividual id="31" receiver="model1" assignation="cityInModel1" userID="FLX" flexoID="210">
            <DataPropertyAssertion id="32" value="parameters.cityName" dataPropertyURI="http://www.thalesgroup.com/openflexo/emf/model/city1/City/name" userID="FLX" flexoID="209" />
          </AssignableAction_AddEMFObjectIndividual>
        </ControlGraph1_AssignationAction>
      </BehaviourControlGraph_Sequence>
      <GenericBehaviourParameter id="33" widget="TEXT_FIELD" name="cityName" type="java.lang.String" userID="FLX" flexoID="285" />
    </CreationScheme>
    <Constraint id="34" constraint="(cityInModel1.name.toUpperCase = cityInModel2.name.toUpperCase)" userID="FLX" flexoID="32" />
  </FlexoConcept>
  <FlexoConcept id="35" isAbstract="true" name="House" userID="FLX" flexoID="44">
    <Inspector id="36" inspectorTitle="House" userID="FLX" flexoID="9" />
  </FlexoConcept>
  <FlexoConcept id="37" parentFlexoConceptsList="http://www.thalesgroup.com/openflexo/emf/CityMapping/Mapping.fml#House" name="Appartment" userID="FLX" flexoID="50">
    <Inspector id="38" renderer="(&quot;Appartment -  &quot; + ((instance.houseInModel1 != null) ? ((instance.appartmentInModel2 != null) ? (instance.houseInModel1.info + &quot; [sync]&quot;) : (instance.houseInModel1.info + &quot; [model1]&quot;)) : (instance.appartmentInModel2.label + &quot; [model2]&quot;)))" inspectorTitle="Appartment" userID="FLX" flexoID="12" />
    <EMFObjectIndividualRole id="39" ontologicType="http://www.thalesgroup.com/openflexo/emf/model/city1/House" container="model1" cloningStrategy="Clone" cardinality="ZeroOne" name="houseInModel1" userID="FLX" flexoID="47" />
    <EMFObjectIndividualRole id="40" ontologicType="http://www.thalesgroup.com/openflexo/emf/model/city2/Appartment" container="model2" cloningStrategy="Clone" cardinality="ZeroOne" name="appartmentInModel2" userID="FLX" flexoID="48" />
    <FlexoConceptInstanceRole id="41" virtualModelInstance="virtualModelInstance" flexoConceptTypeURI="http://www.thalesgroup.com/openflexo/emf/CityMapping/Mapping.fml#City" cloningStrategy="Reference" cardinality="ZeroOne" name="city" userID="FLX" flexoID="49" />
    <CreationScheme id="42" skipConfirmationPanel="false" name="creation" width="800" label="creation" height="600" userID="FLX" flexoID="15">
      <BehaviourControlGraph_Sequence id="43" userID="FLX" flexoID="241">
        <ControlGraph2_Sequence id="44" ownerContext="controlGraph2" userID="FLX" flexoID="244">
          <ControlGraph2_AssignationAction id="45" assign="city" ownerContext="controlGraph2" userID="FLX" flexoID="247">
            <AssignableAction_ExpressionAction id="46" expression="parameters.cityParameter" userID="FLX" flexoID="248" />
          </ControlGraph2_AssignationAction>
          <ControlGraph1_AssignationAction id="47" assign="appartmentInModel2" ownerContext="controlGraph1" userID="FLX" flexoID="245">
            <AssignableAction_ExpressionAction id="48" expression="parameters.appartmentInModel2" userID="FLX" flexoID="246" />
          </ControlGraph1_AssignationAction>
        </ControlGraph2_Sequence>
        <ControlGraph1_AssignationAction id="49" assign="houseInModel1" ownerContext="controlGraph1" userID="FLX" flexoID="242">
          <AssignableAction_ExpressionAction id="50" expression="parameters.houseInModel1" userID="FLX" flexoID="243" />
        </ControlGraph1_AssignationAction>
      </BehaviourControlGraph_Sequence>
      <GenericBehaviourParameter id="51" widget="CUSTOM_WIDGET" name="houseInModel1" type="org.openflexo.foundation.ontology.IFlexoOntologyIndividual" userID="FLX" flexoID="286" />
      <GenericBehaviourParameter id="52" widget="CUSTOM_WIDGET" name="appartmentInModel2" type="org.openflexo.foundation.ontology.IFlexoOntologyIndividual" userID="FLX" flexoID="287" />
      <GenericBehaviourParameter id="53" widget="CUSTOM_WIDGET" name="cityParameter" type="org.openflexo.foundation.fml.FlexoConceptInstanceType&lt;null&gt;" userID="FLX" flexoID="288" />
    </CreationScheme>
    <DeletionScheme id="54" skipConfirmationPanel="false" name="deletion" width="800" label="deletion" height="600" userID="FLX" flexoID="16">
      <BehaviourControlGraph_Sequence id="55" userID="FLX" flexoID="249">
        <ControlGraph2_DeleteAction id="56" object="appartmentInModel2" ownerContext="controlGraph2" userID="FLX" flexoID="55" />
        <ControlGraph1_DeleteAction id="57" object="houseInModel1" ownerContext="controlGraph1" userID="FLX" flexoID="54" />
      </BehaviourControlGraph_Sequence>
    </DeletionScheme>
    <Constraint id="58" constraint="(houseInModel1.type.name = &quot;Appartment&quot;)" userID="FLX" flexoID="45" />
    <Constraint id="59" constraint="(houseInModel1.info = appartmentInModel2.label)" userID="FLX" flexoID="46" />
  </FlexoConcept>
  <FlexoConcept id="60" parentFlexoConceptsList="http://www.thalesgroup.com/openflexo/emf/CityMapping/Mapping.fml#House" name="Mansion" userID="FLX" flexoID="61">
    <Inspector id="61" renderer="(&quot;Mansion - &quot; + ((instance.houseInModel1 != null) ? ((instance.mansionInModel2 != null) ? (instance.houseInModel1.info + &quot; [sync]&quot;) : (instance.houseInModel1.info + &quot; [model1]&quot;)) : (instance.mansionInModel2.number.toString + &quot; [model2]&quot;)))" inspectorTitle="Mansion" userID="FLX" flexoID="18" />
    <EMFObjectIndividualRole id="62" ontologicType="http://www.thalesgroup.com/openflexo/emf/model/city1/House" container="model1" cloningStrategy="Clone" cardinality="ZeroOne" name="houseInModel1" userID="FLX" flexoID="58" />
    <EMFObjectIndividualRole id="63" ontologicType="http://www.thalesgroup.com/openflexo/emf/model/city2/Mansion" container="model2" cloningStrategy="Clone" cardinality="ZeroOne" name="mansionInModel2" userID="FLX" flexoID="59" />
    <FlexoConceptInstanceRole id="64" virtualModelInstance="virtualModelInstance" flexoConceptTypeURI="http://www.thalesgroup.com/openflexo/emf/CityMapping/Mapping.fml#City" cloningStrategy="Reference" cardinality="ZeroOne" name="city" userID="FLX" flexoID="60" />
    <CreationScheme id="65" skipConfirmationPanel="false" name="creation" width="800" label="creation" height="600" userID="FLX" flexoID="21">
      <BehaviourControlGraph_Sequence id="66" userID="FLX" flexoID="250">
        <ControlGraph2_Sequence id="67" ownerContext="controlGraph2" userID="FLX" flexoID="253">
          <ControlGraph2_AssignationAction id="68" assign="city" ownerContext="controlGraph2" userID="FLX" flexoID="256">
            <AssignableAction_ExpressionAction id="69" expression="parameters.cityParameter" userID="FLX" flexoID="257" />
          </ControlGraph2_AssignationAction>
          <ControlGraph1_AssignationAction id="70" assign="mansionInModel2" ownerContext="controlGraph1" userID="FLX" flexoID="254">
            <AssignableAction_ExpressionAction id="71" expression="parameters.mansionInModel2" userID="FLX" flexoID="255" />
          </ControlGraph1_AssignationAction>
        </ControlGraph2_Sequence>
        <ControlGraph1_AssignationAction id="72" assign="houseInModel1" ownerContext="controlGraph1" userID="FLX" flexoID="251">
          <AssignableAction_ExpressionAction id="73" expression="parameters.houseInModel1" userID="FLX" flexoID="252" />
        </ControlGraph1_AssignationAction>
      </BehaviourControlGraph_Sequence>
      <GenericBehaviourParameter id="74" widget="CUSTOM_WIDGET" name="houseInModel1" type="org.openflexo.foundation.ontology.IFlexoOntologyIndividual" userID="FLX" flexoID="289" />
      <GenericBehaviourParameter id="75" widget="CUSTOM_WIDGET" name="mansionInModel2" type="org.openflexo.foundation.ontology.IFlexoOntologyIndividual" userID="FLX" flexoID="290" />
      <GenericBehaviourParameter id="76" widget="CUSTOM_WIDGET" name="cityParameter" type="org.openflexo.foundation.fml.FlexoConceptInstanceType&lt;null&gt;" userID="FLX" flexoID="291" />
    </CreationScheme>
    <DeletionScheme id="77" skipConfirmationPanel="false" name="deletion" width="800" label="deletion" height="600" userID="FLX" flexoID="22">
      <BehaviourControlGraph_Sequence id="78" userID="FLX" flexoID="258">
        <ControlGraph2_DeleteAction id="79" object="mansionInModel2" ownerContext="controlGraph2" userID="FLX" flexoID="66" />
        <ControlGraph1_DeleteAction id="80" object="houseInModel1" ownerContext="controlGraph1" userID="FLX" flexoID="65" />
      </BehaviourControlGraph_Sequence>
    </DeletionScheme>
    <Constraint id="81" constraint="(houseInModel1.type.name = &quot;Mansion&quot;)" userID="FLX" flexoID="56" />
    <Constraint id="82" constraint="(houseInModel1.info = mansionInModel2.number.toString)" userID="FLX" flexoID="57" />
  </FlexoConcept>
  <FlexoConcept id="83" isAbstract="true" name="Resident" userID="FLX" flexoID="70">
    <Inspector id="84" renderer="((instance.residentInModel1 != null) ? ((instance.houseInModel2 != null) ? (instance.residentInModel1.name + &quot; [sync]&quot;) : (instance.residentInModel1.name + &quot; [model1]&quot;)) : (instance.houseInModel2.owner + &quot; [model2]&quot;))" inspectorTitle="Resident" userID="FLX" flexoID="24" />
    <EMFObjectIndividualRole id="85" ontologicType="http://www.thalesgroup.com/openflexo/emf/model/city1/Resident" container="model1" cloningStrategy="Clone" cardinality="ZeroOne" name="residentInModel1" userID="FLX" flexoID="68" />
    <EMFObjectIndividualRole id="86" ontologicType="http://www.thalesgroup.com/openflexo/emf/model/city2/House" container="model2" cloningStrategy="Clone" cardinality="ZeroOne" name="houseInModel2" userID="FLX" flexoID="69" />
    <CreationScheme id="87" skipConfirmationPanel="false" name="creation" width="800" label="creation" height="600" userID="FLX" flexoID="30">
      <BehaviourControlGraph_Sequence id="88" userID="FLX" flexoID="259">
        <ControlGraph2_AssignationAction id="89" assign="houseInModel2" ownerContext="controlGraph2" userID="FLX" flexoID="262">
          <AssignableAction_ExpressionAction id="90" expression="parameters.houseInModel2" userID="FLX" flexoID="263" />
        </ControlGraph2_AssignationAction>
        <ControlGraph1_AssignationAction id="91" assign="residentInModel1" ownerContext="controlGraph1" userID="FLX" flexoID="260">
          <AssignableAction_ExpressionAction id="92" expression="parameters.residentInModel1" userID="FLX" flexoID="261" />
        </ControlGraph1_AssignationAction>
      </BehaviourControlGraph_Sequence>
      <GenericBehaviourParameter id="93" widget="CUSTOM_WIDGET" name="residentInModel1" type="org.openflexo.foundation.ontology.IFlexoOntologyIndividual" userID="FLX" flexoID="292" />
      <GenericBehaviourParameter id="94" widget="CUSTOM_WIDGET" name="houseInModel2" type="org.openflexo.foundation.ontology.IFlexoOntologyIndividual" userID="FLX" flexoID="293" />
    </CreationScheme>
    <Constraint id="95" constraint="(residentInModel1.name = houseInModel2.owner)" userID="FLX" flexoID="67" />
  </FlexoConcept>
  <FlexoConcept id="96" name="Mayor" userID="FLX" flexoID="73">
    <Inspector id="97" inspectorTitle="Mayor" userID="FLX" flexoID="27" />
    <EMFObjectIndividualRole id="98" ontologicType="http://www.thalesgroup.com/openflexo/emf/model/city2/Mayor" container="model1" cloningStrategy="Clone" cardinality="ZeroOne" name="mayor" description="" userID="FLX" flexoID="271" />
  </FlexoConcept>
  <UseModelSlotDeclaration id="99" modelSlotClass="org.openflexo.technologyadapter.emf.EMFModelSlot" userID="FLX" flexoID="-1" />
  <Inspector id="100" inspectorTitle="CityMapping" userID="FLX" flexoID="3" />
  <EMFModelSlot id="101" metaModelURI="http://www.thalesgroup.com/openflexo/emf/model/city1" isRequired="true" cloningStrategy="Reference" cardinality="ZeroOne" name="model1" userID="FLX" flexoID="161" />
  <EMFModelSlot id="102" metaModelURI="http://www.thalesgroup.com/openflexo/emf/model/city2" isRequired="true" cloningStrategy="Reference" cardinality="ZeroOne" name="model2" userID="FLX" flexoID="162" />
  <SynchronizationScheme id="103" skipConfirmationPanel="false" name="synchronization" width="800" label="synchronization" height="600" userID="FLX" flexoID="74">
    <BehaviourControlGraph_Sequence id="104" userID="FLX" flexoID="4">
      <ControlGraph2_Sequence id="105" ownerContext="controlGraph2" userID="FLX" flexoID="27">
        <ControlGraph2_IterationAction id="106" iteratorName="city2" ownerContext="controlGraph2" userID="FLX" flexoID="36">
          <Iteration_SelectEMFObjectIndividual id="107" ontologyClassURI="http://www.thalesgroup.com/openflexo/emf/model/city2/City" receiver="model2" ownerContext="iterationControlGraph" userID="FLX" flexoID="145" />
          <ControlGraph_Sequence id="108" ownerContext="controlGraph" userID="FLX" flexoID="33">
            <ControlGraph2_ConditionalAction id="109" condition="(matchingCitiesInModel1.size = 0)" ownerContext="controlGraph2" userID="FLX" flexoID="147">
              <ThenControlGraph_MatchFlexoConceptInstance id="110" creationSchemeURI="http://www.thalesgroup.com/openflexo/emf/CityMapping/Mapping.fml#City.createFromEMF" receiver="this" ownerContext="thenControlGraph" userID="FLX" flexoID="150">
                <MatchingCriteria id="111" patternRoleName="cityInModel1" value="null" userID="FLX" flexoID="148" />
                <MatchingCriteria id="112" patternRoleName="cityInModel2" value="city2" userID="FLX" flexoID="149" />
                <CreateFlexoConceptInstanceParameter id="113" paramName="cityInModel1" value="null" userID="FLX" flexoID="151" />
                <CreateFlexoConceptInstanceParameter id="114" paramName="cityInModel2" value="city2" userID="FLX" flexoID="152" />
              </ThenControlGraph_MatchFlexoConceptInstance>
            </ControlGraph2_ConditionalAction>
            <ControlGraph1_DeclarationAction id="115" variable="matchingCitiesInModel1" ownerContext="controlGraph1" userID="FLX" flexoID="34">
              <AssignableAction_SelectEMFObjectIndividual id="116" ontologyClassURI="http://www.thalesgroup.com/openflexo/emf/model/city1/City" receiver="model1" variableName="matchingCitiesInModel1" assignation="matchingCitiesInModel1" userID="FLX" flexoID="146">
                <Condition id="117" condition="(selected.name = city2.name)" userID="FLX" flexoID="35" />
              </AssignableAction_SelectEMFObjectIndividual>
            </ControlGraph1_DeclarationAction>
          </ControlGraph_Sequence>
        </ControlGraph2_IterationAction>
        <ControlGraph1_IterationAction id="118" iteratorName="residentInModel1" ownerContext="controlGraph1" userID="FLX" flexoID="32">
          <Iteration_SelectEMFObjectIndividual id="119" ontologyClassURI="http://www.thalesgroup.com/openflexo/emf/model/city1/Resident" receiver="model1" ownerContext="iterationControlGraph" userID="FLX" flexoID="130" />
          <ControlGraph_Sequence id="120" ownerContext="controlGraph" userID="FLX" flexoID="28">
            <ControlGraph2_Sequence id="121" ownerContext="controlGraph2" userID="FLX" flexoID="31">
              <ControlGraph2_ConditionalAction id="122" condition="(matchingHousesWithSameResident.size &gt;= 1)" ownerContext="controlGraph2" userID="FLX" flexoID="138">
                <ThenControlGraph_MatchFlexoConceptInstance id="123" creationSchemeURI="http://www.thalesgroup.com/openflexo/emf/CityMapping/Mapping.fml#Resident.creation" receiver="this" ownerContext="thenControlGraph" name="" userID="FLX" flexoID="141">
                  <MatchingCriteria id="124" patternRoleName="residentInModel1" value="residentInModel1" userID="FLX" flexoID="139" />
                  <MatchingCriteria id="125" patternRoleName="houseInModel2" value="matchingHousesWithSameResident.get(0)" userID="FLX" flexoID="140" />
                  <CreateFlexoConceptInstanceParameter id="126" paramName="residentInModel1" value="residentInModel1" userID="FLX" flexoID="142" />
                  <CreateFlexoConceptInstanceParameter id="127" paramName="houseInModel2" value="matchingHousesWithSameResident.get(0)" userID="FLX" flexoID="143" />
                </ThenControlGraph_MatchFlexoConceptInstance>
              </ControlGraph2_ConditionalAction>
              <ControlGraph1_ConditionalAction id="128" condition="(matchingHousesWithSameResident.size = 0)" ownerContext="controlGraph1" userID="FLX" flexoID="132">
                <ThenControlGraph_MatchFlexoConceptInstance id="129" creationSchemeURI="http://www.thalesgroup.com/openflexo/emf/CityMapping/Mapping.fml#Resident.creation" receiver="this" ownerContext="thenControlGraph" userID="FLX" flexoID="135">
                  <MatchingCriteria id="130" patternRoleName="residentInModel1" value="residentInModel1" userID="FLX" flexoID="133" />
                  <MatchingCriteria id="131" patternRoleName="houseInModel2" value="null" userID="FLX" flexoID="134" />
                  <CreateFlexoConceptInstanceParameter id="132" paramName="residentInModel1" value="residentInModel1" userID="FLX" flexoID="136" />
                  <CreateFlexoConceptInstanceParameter id="133" paramName="houseInModel2" value="null" userID="FLX" flexoID="137" />
                </ThenControlGraph_MatchFlexoConceptInstance>
              </ControlGraph1_ConditionalAction>
            </ControlGraph2_Sequence>
            <ControlGraph1_DeclarationAction id="134" variable="matchingHousesWithSameResident" ownerContext="controlGraph1" userID="FLX" flexoID="29">
              <AssignableAction_SelectEMFObjectIndividual id="135" ontologyClassURI="http://www.thalesgroup.com/openflexo/emf/model/city2/House" receiver="model2" variableName="matchingHousesWithSameResident" assignation="matchingHousesWithSameResident" userID="FLX" flexoID="131">
                <Condition id="136" condition="(selected.owner.toUpperCase = residentInModel1.name.toUpperCase)" userID="FLX" flexoID="30" />
              </AssignableAction_SelectEMFObjectIndividual>
            </ControlGraph1_DeclarationAction>
          </ControlGraph_Sequence>
        </ControlGraph1_IterationAction>
      </ControlGraph2_Sequence>
      <ControlGraph1_IterationAction id="137" iteratorName="city1" ownerContext="controlGraph1" userID="FLX" flexoID="26">
        <Iteration_SelectEMFObjectIndividual id="138" ontologyClassURI="http://www.thalesgroup.com/openflexo/emf/model/city1/City" receiver="model1" ownerContext="iterationControlGraph" userID="FLX" flexoID="76" />
        <ControlGraph_Sequence id="139" ownerContext="controlGraph" userID="FLX" flexoID="5">
          <ControlGraph2_Sequence id="140" ownerContext="controlGraph2" userID="FLX" flexoID="8">
            <ControlGraph2_Sequence id="141" ownerContext="controlGraph2" userID="FLX" flexoID="9">
              <ControlGraph2_Sequence id="142" ownerContext="controlGraph2" userID="FLX" flexoID="10">
                <ControlGraph2_Sequence id="143" ownerContext="controlGraph2" userID="FLX" flexoID="13">
                  <ControlGraph2_IterationAction id="144" iteratorName="house1" ownerContext="controlGraph2" userID="FLX" flexoID="92">
                    <Iteration_ExpressionAction id="145" expression="city1.houses" ownerContext="iterationControlGraph" userID="FLX" flexoID="25" />
                    <ControlGraph_Sequence id="146" ownerContext="controlGraph" userID="FLX" flexoID="16">
                      <ControlGraph2_ConditionalAction id="147" condition="(house1.type.name = &quot;Mansion&quot;)" ownerContext="controlGraph2" userID="FLX" flexoID="111">
                        <ThenControlGraph_Sequence id="148" ownerContext="thenControlGraph" userID="FLX" flexoID="21">
                          <ControlGraph2_Sequence id="149" ownerContext="controlGraph2" userID="FLX" flexoID="24">
                            <ControlGraph2_ConditionalAction id="150" condition="(matchingMansionsInModel2.size = 1)" ownerContext="controlGraph2" userID="FLX" flexoID="121">
                              <ThenControlGraph_MatchFlexoConceptInstance id="151" creationSchemeURI="http://www.thalesgroup.com/openflexo/emf/CityMapping/Mapping.fml#Mansion.creation" receiver="this" ownerContext="thenControlGraph" userID="FLX" flexoID="125">
                                <MatchingCriteria id="152" patternRoleName="houseInModel1" value="house1" userID="FLX" flexoID="122" />
                                <MatchingCriteria id="153" patternRoleName="mansionInModel2" value="matchingMansionsInModel2.get(0)" userID="FLX" flexoID="123" />
                                <MatchingCriteria id="154" patternRoleName="city" value="currentCity" userID="FLX" flexoID="124" />
                                <CreateFlexoConceptInstanceParameter id="155" paramName="houseInModel1" value="house1" userID="FLX" flexoID="126" />
                                <CreateFlexoConceptInstanceParameter id="156" paramName="mansionInModel2" value="matchingMansionsInModel2.get(0)" userID="FLX" flexoID="127" />
                                <CreateFlexoConceptInstanceParameter id="157" paramName="cityParameter" value="currentCity" userID="FLX" flexoID="128" />
                              </ThenControlGraph_MatchFlexoConceptInstance>
                            </ControlGraph2_ConditionalAction>
                            <ControlGraph1_ConditionalAction id="158" condition="(matchingMansionsInModel2.size = 0)" ownerContext="controlGraph1" userID="FLX" flexoID="113">
                              <ThenControlGraph_MatchFlexoConceptInstance id="159" creationSchemeURI="http://www.thalesgroup.com/openflexo/emf/CityMapping/Mapping.fml#Mansion.creation" receiver="this" ownerContext="thenControlGraph" userID="FLX" flexoID="117">
                                <MatchingCriteria id="160" patternRoleName="houseInModel1" value="house1" userID="FLX" flexoID="114" />
                                <MatchingCriteria id="161" patternRoleName="mansionInModel2" value="null" userID="FLX" flexoID="115" />
                                <MatchingCriteria id="162" patternRoleName="city" value="currentCity" userID="FLX" flexoID="116" />
                                <CreateFlexoConceptInstanceParameter id="163" paramName="houseInModel1" value="house1" userID="FLX" flexoID="118" />
                                <CreateFlexoConceptInstanceParameter id="164" paramName="mansionInModel2" value="null" userID="FLX" flexoID="119" />
                                <CreateFlexoConceptInstanceParameter id="165" paramName="cityParameter" value="currentCity" userID="FLX" flexoID="120" />
                              </ThenControlGraph_MatchFlexoConceptInstance>
                            </ControlGraph1_ConditionalAction>
                          </ControlGraph2_Sequence>
                          <ControlGraph1_DeclarationAction id="166" variable="matchingMansionsInModel2" ownerContext="controlGraph1" userID="FLX" flexoID="22">
                            <AssignableAction_SelectEMFObjectIndividual id="167" ontologyClassURI="http://www.thalesgroup.com/openflexo/emf/model/city2/Mansion" receiver="model2" variableName="matchingMansionsInModel2" assignation="matchingMansionsInModel2" userID="FLX" flexoID="112">
                              <Condition id="168" condition="(selected.number.toString = house1.info)" userID="FLX" flexoID="23" />
                            </AssignableAction_SelectEMFObjectIndividual>
                          </ControlGraph1_DeclarationAction>
                        </ThenControlGraph_Sequence>
                      </ControlGraph2_ConditionalAction>
                      <ControlGraph1_ConditionalAction id="169" condition="(house1.type.name = &quot;Appartment&quot;)" ownerContext="controlGraph1" userID="FLX" flexoID="93">
                        <ThenControlGraph_Sequence id="170" ownerContext="thenControlGraph" userID="FLX" flexoID="17">
                          <ControlGraph2_Sequence id="171" ownerContext="controlGraph2" userID="FLX" flexoID="20">
                            <ControlGraph2_ConditionalAction id="172" condition="(matchingAppartmentsInModel2.size = 1)" ownerContext="controlGraph2" userID="FLX" flexoID="103">
                              <ThenControlGraph_MatchFlexoConceptInstance id="173" creationSchemeURI="http://www.thalesgroup.com/openflexo/emf/CityMapping/Mapping.fml#Appartment.creation" receiver="this" ownerContext="thenControlGraph" userID="FLX" flexoID="107">
                                <MatchingCriteria id="174" patternRoleName="houseInModel1" value="house1" userID="FLX" flexoID="104" />
                                <MatchingCriteria id="175" patternRoleName="appartmentInModel2" value="matchingAppartmentsInModel2.get(0)" userID="FLX" flexoID="105" />
                                <MatchingCriteria id="176" patternRoleName="city" value="currentCity" userID="FLX" flexoID="106" />
                                <CreateFlexoConceptInstanceParameter id="177" paramName="houseInModel1" value="house1" userID="FLX" flexoID="108" />
                                <CreateFlexoConceptInstanceParameter id="178" paramName="appartmentInModel2" value="matchingAppartmentsInModel2.get(0)" userID="FLX" flexoID="109" />
                                <CreateFlexoConceptInstanceParameter id="179" paramName="cityParameter" value="currentCity" userID="FLX" flexoID="110" />
                              </ThenControlGraph_MatchFlexoConceptInstance>
                            </ControlGraph2_ConditionalAction>
                            <ControlGraph1_ConditionalAction id="180" condition="(matchingAppartmentsInModel2.size = 0)" ownerContext="controlGraph1" userID="FLX" flexoID="95">
                              <ThenControlGraph_MatchFlexoConceptInstance id="181" creationSchemeURI="http://www.thalesgroup.com/openflexo/emf/CityMapping/Mapping.fml#Appartment.creation" receiver="this" ownerContext="thenControlGraph" userID="FLX" flexoID="99">
                                <MatchingCriteria id="182" patternRoleName="houseInModel1" value="house1" userID="FLX" flexoID="96" />
                                <MatchingCriteria id="183" patternRoleName="appartmentInModel2" value="null" userID="FLX" flexoID="97" />
                                <MatchingCriteria id="184" patternRoleName="city" value="currentCity" userID="FLX" flexoID="98" />
                                <CreateFlexoConceptInstanceParameter id="185" paramName="houseInModel1" value="house1" userID="FLX" flexoID="100" />
                                <CreateFlexoConceptInstanceParameter id="186" paramName="appartmentInModel2" value="null" userID="FLX" flexoID="101" />
                                <CreateFlexoConceptInstanceParameter id="187" paramName="cityParameter" value="currentCity" userID="FLX" flexoID="102" />
                              </ThenControlGraph_MatchFlexoConceptInstance>
                            </ControlGraph1_ConditionalAction>
                          </ControlGraph2_Sequence>
                          <ControlGraph1_DeclarationAction id="188" variable="matchingAppartmentsInModel2" ownerContext="controlGraph1" userID="FLX" flexoID="18">
                            <AssignableAction_SelectEMFObjectIndividual id="189" ontologyClassURI="http://www.thalesgroup.com/openflexo/emf/model/city2/Appartment" receiver="model2" variableName="matchingAppartmentsInModel2" assignation="matchingAppartmentsInModel2" userID="FLX" flexoID="94">
                              <Condition id="190" condition="(selected.label = house1.info)" userID="FLX" flexoID="19" />
                            </AssignableAction_SelectEMFObjectIndividual>
                          </ControlGraph1_DeclarationAction>
                        </ThenControlGraph_Sequence>
                      </ControlGraph1_ConditionalAction>
                    </ControlGraph_Sequence>
                  </ControlGraph2_IterationAction>
                  <ControlGraph1_DeclarationAction id="191" variable="currentCity" ownerContext="controlGraph1" userID="FLX" flexoID="14">
                    <AssignableAction_ExpressionAction id="192" expression="tempList.get(0)" userID="FLX" flexoID="15" />
                  </ControlGraph1_DeclarationAction>
                </ControlGraph2_Sequence>
                <ControlGraph1_DeclarationAction id="193" variable="tempList" ownerContext="controlGraph1" userID="FLX" flexoID="11">
                  <AssignableAction_SelectFlexoConceptInstance id="194" flexoConceptTypeURI="http://www.thalesgroup.com/openflexo/emf/CityMapping/Mapping.fml#City" receiver="this" variableName="tempList" assignation="tempList" userID="FLX" flexoID="90">
                    <Condition id="195" condition="(selected.cityInModel1 = city1)" userID="FLX" flexoID="12" />
                  </AssignableAction_SelectFlexoConceptInstance>
                </ControlGraph1_DeclarationAction>
              </ControlGraph2_Sequence>
              <ControlGraph1_ConditionalAction id="196" condition="(matchingCitiesInModel2.size = 1)" ownerContext="controlGraph1" userID="FLX" flexoID="84">
                <ThenControlGraph_MatchFlexoConceptInstance id="197" creationSchemeURI="http://www.thalesgroup.com/openflexo/emf/CityMapping/Mapping.fml#City.createFromEMF" receiver="this" ownerContext="thenControlGraph" userID="FLX" flexoID="87">
                  <MatchingCriteria id="198" patternRoleName="cityInModel1" value="city1" userID="FLX" flexoID="85" />
                  <MatchingCriteria id="199" patternRoleName="cityInModel2" value="matchingCitiesInModel2.get(0)" userID="FLX" flexoID="86" />
                  <CreateFlexoConceptInstanceParameter id="200" paramName="cityInModel1" value="city1" userID="FLX" flexoID="88" />
                  <CreateFlexoConceptInstanceParameter id="201" paramName="cityInModel2" value="matchingCitiesInModel2.get(0)" userID="FLX" flexoID="89" />
                </ThenControlGraph_MatchFlexoConceptInstance>
              </ControlGraph1_ConditionalAction>
            </ControlGraph2_Sequence>
            <ControlGraph1_ConditionalAction id="202" condition="(matchingCitiesInModel2.size = 0)" ownerContext="controlGraph1" userID="FLX" flexoID="78">
              <ThenControlGraph_MatchFlexoConceptInstance id="203" creationSchemeURI="http://www.thalesgroup.com/openflexo/emf/CityMapping/Mapping.fml#City.createFromEMF" receiver="this" ownerContext="thenControlGraph" name="" userID="FLX" flexoID="81">
                <MatchingCriteria id="204" patternRoleName="cityInModel1" value="city1" userID="FLX" flexoID="79" />
                <MatchingCriteria id="205" patternRoleName="cityInModel2" value="null" userID="FLX" flexoID="80" />
                <CreateFlexoConceptInstanceParameter id="206" paramName="cityInModel1" value="city1" userID="FLX" flexoID="82" />
                <CreateFlexoConceptInstanceParameter id="207" paramName="cityInModel2" value="null" userID="FLX" flexoID="83" />
              </ThenControlGraph_MatchFlexoConceptInstance>
            </ControlGraph1_ConditionalAction>
          </ControlGraph2_Sequence>
          <ControlGraph1_DeclarationAction id="208" variable="matchingCitiesInModel2" ownerContext="controlGraph1" userID="FLX" flexoID="6">
            <AssignableAction_SelectEMFObjectIndividual id="209" ontologyClassURI="http://www.thalesgroup.com/openflexo/emf/model/city2/City" receiver="model2" variableName="matchingCitiesInModel2" assignation="matchingCitiesInModel2" userID="FLX" flexoID="77">
              <Condition id="210" condition="(selected.name.toUpperCase = city1.name.toUpperCase)" userID="FLX" flexoID="7" />
            </AssignableAction_SelectEMFObjectIndividual>
          </ControlGraph1_DeclarationAction>
        </ControlGraph_Sequence>
      </ControlGraph1_IterationAction>
    </BehaviourControlGraph_Sequence>
  </SynchronizationScheme>
  <ActionScheme id="211" skipConfirmationPanel="false" name="synchronizeModel2FromModel1" width="800" label="Synchronize model2 from model 1" height="600" userID="FLX" flexoID="153">
    <BehaviourControlGraph_Sequence id="212" userID="FLX" flexoID="37">
      <ControlGraph2_IterationAction id="213" iteratorName="nonExistantCity" ownerContext="controlGraph2" userID="FLX" flexoID="155">
        <Iteration_ExpressionAction id="214" expression="nonExistantCitiesInModel2" ownerContext="iterationControlGraph" userID="FLX" flexoID="41" />
        <ControlGraph_ExpressionAction id="215" expression="nonExistantCity.generateModel2FromModel1()" ownerContext="controlGraph" userID="FLX" flexoID="40" />
      </ControlGraph2_IterationAction>
      <ControlGraph1_DeclarationAction id="216" variable="nonExistantCitiesInModel2" ownerContext="controlGraph1" userID="FLX" flexoID="38">
        <AssignableAction_SelectFlexoConceptInstance id="217" flexoConceptTypeURI="http://www.thalesgroup.com/openflexo/emf/CityMapping/Mapping.fml#City" receiver="this" variableName="nonExistantCitiesInModel2" assignation="nonExistantCitiesInModel2" userID="FLX" flexoID="154">
          <Condition id="218" condition="(selected.cityInModel2 = null)" userID="FLX" flexoID="39" />
        </AssignableAction_SelectFlexoConceptInstance>
      </ControlGraph1_DeclarationAction>
    </BehaviourControlGraph_Sequence>
  </ActionScheme>
  <ActionScheme id="219" skipConfirmationPanel="false" name="synchronizeModel1FromModel2" width="800" label="synchronizeModel1FromModel2" height="600" userID="FLX" flexoID="157">
    <BehaviourControlGraph_Sequence id="220" userID="FLX" flexoID="42">
      <ControlGraph2_IterationAction id="221" iteratorName="nonExistingCity" ownerContext="controlGraph2" userID="FLX" flexoID="159">
        <Iteration_ExpressionAction id="222" expression="nonExistingCitiesInModel1" ownerContext="iterationControlGraph" userID="FLX" flexoID="46" />
        <ControlGraph_ExpressionAction id="223" expression="nonExistingCity.generateModel1FromModel2()" ownerContext="controlGraph" userID="FLX" flexoID="45" />
      </ControlGraph2_IterationAction>
      <ControlGraph1_DeclarationAction id="224" variable="nonExistingCitiesInModel1" ownerContext="controlGraph1" userID="FLX" flexoID="43">
        <AssignableAction_SelectFlexoConceptInstance id="225" flexoConceptTypeURI="http://www.thalesgroup.com/openflexo/emf/CityMapping/Mapping.fml#City" receiver="this" variableName="nonExistingCitiesInModel1" assignation="nonExistingCitiesInModel1" userID="FLX" flexoID="158">
          <Condition id="226" condition="(selected.cityInModel1 = null)" userID="FLX" flexoID="44" />
        </AssignableAction_SelectFlexoConceptInstance>
      </ControlGraph1_DeclarationAction>
    </BehaviourControlGraph_Sequence>
  </ActionScheme>
  <CreationScheme id="227" name="create" width="800" label="create" height="600" userID="FLX" flexoID="275">
    <BehaviourControlGraph_Sequence id="228" userID="FLX" flexoID="294">
      <ControlGraph2_AssignationAction id="229" assign="model2" ownerContext="controlGraph2" userID="FLX" flexoID="282">
        <AssignableAction_ExpressionAction id="230" expression="parameters.city2.getResourceData(null)" userID="FLX" flexoID="281" />
      </ControlGraph2_AssignationAction>
      <ControlGraph1_AssignationAction id="231" assign="model1" ownerContext="controlGraph1" userID="FLX" flexoID="280">
        <AssignableAction_ExpressionAction id="232" expression="parameters.city1.getResourceData(null)" userID="FLX" flexoID="279" />
      </ControlGraph1_AssignationAction>
    </BehaviourControlGraph_Sequence>
    <GenericBehaviourParameter id="233" isRequired="true" widget="CUSTOM_WIDGET" name="city1" type="org.openflexo.foundation.resource.FlexoResourceType&lt;org.openflexo.technologyadapter.emf.model.EMFModel&gt;" userID="FLX" flexoID="276" />
    <GenericBehaviourParameter id="234" isRequired="true" widget="CUSTOM_WIDGET" name="city2" type="org.openflexo.foundation.resource.FlexoResourceType&lt;org.openflexo.technologyadapter.emf.model.EMFModel&gt;" userID="FLX" flexoID="277" />
  </CreationScheme>
</VirtualModel>
