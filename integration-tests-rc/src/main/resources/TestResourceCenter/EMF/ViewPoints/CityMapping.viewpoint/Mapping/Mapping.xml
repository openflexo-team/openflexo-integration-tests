<?xml version="1.0" encoding="UTF-8"?>
<VirtualModel id="0" modelVersion="1.0" version="0.1" name="CityMapping" userID="FLX" flexoID="264">
  <FlexoConcept id="1" name="City" userID="FLX" flexoID="35">
    <EMFObjectIndividualRole id="2" ontologicType="http://www.thalesgroup.com/openflexo/emf/model/city1/City" container="model1" cloningStrategy="Clone" cardinality="ZeroOne" name="cityInModel1" userID="FLX" flexoID="33">
      <EMFModelSlot idref="3" />
    </EMFObjectIndividualRole>
    <EMFObjectIndividualRole id="4" ontologicType="http://www.thalesgroup.com/openflexo/emf/model/city2/City" container="model2" cloningStrategy="Clone" cardinality="ZeroOne" name="cityInModel2" userID="FLX" flexoID="34">
      <EMFModelSlot idref="5" />
    </EMFObjectIndividualRole>
    <CreationScheme id="6" skipConfirmationPanel="false" name="createFromEMF" width="800" label="Creation form Existing EMF Individuals" height="600" userID="FLX" description="" flexoID="4">
      <BehaviourControlGraph_Sequence id="7" userID="FLX" flexoID="230">
        <ControlGraph2_AssignationAction id="8" assign="cityInModel2" ownerContext="controlGraph2" userID="FLX" flexoID="233">
          <AssignableAction_ExpressionAction id="9" expression="parameters.cityInModel2" userID="FLX" flexoID="234" />
        </ControlGraph2_AssignationAction>
        <ControlGraph1_AssignationAction id="10" assign="cityInModel1" ownerContext="controlGraph1" userID="FLX" flexoID="231">
          <AssignableAction_ExpressionAction id="11" expression="parameters.cityInModel1" userID="FLX" flexoID="232" />
        </ControlGraph1_AssignationAction>
      </BehaviourControlGraph_Sequence>
      <GenericBehaviourParameter id="12" widget="CUSTOM_WIDGET" name="cityInModel1" type="org.openflexo.foundation.ontology.IFlexoOntologyIndividual" userID="FLX" flexoID="283" />
      <GenericBehaviourParameter id="13" widget="CUSTOM_WIDGET" name="cityInModel2" type="org.openflexo.foundation.ontology.IFlexoOntologyIndividual" userID="FLX" flexoID="284" />
    </CreationScheme>
    <ActionScheme id="14" conditional="(cityInModel2 = null)" name="generateModel2FromModel1" width="800" label="generateModel2FromModel1" height="600" userID="FLX" flexoID="5">
      <BehaviourControlGraph_AssignationAction id="15" assign="cityInModel2" userID="FLX" flexoID="235">
        <AssignableAction_AddEMFObjectIndividual id="16" assignation="cityInModel2" userID="FLX" flexoID="38">
          <DataPropertyAssertion id="17" value="cityInModel1.name" dataPropertyURI="http://www.thalesgroup.com/openflexo/emf/model/city2/City/name" userID="FLX" flexoID="39" />
          <EMFModelSlot idref="5" />
        </AssignableAction_AddEMFObjectIndividual>
      </BehaviourControlGraph_AssignationAction>
    </ActionScheme>
    <ActionScheme id="18" conditional="(cityInModel1 = null)" skipConfirmationPanel="false" name="generateModel1FromModel2" width="800" label="generateModel1FromModel2" height="600" userID="FLX" flexoID="6">
      <BehaviourControlGraph_AssignationAction id="19" assign="cityInModel1" userID="FLX" flexoID="236">
        <AssignableAction_AddEMFObjectIndividual id="20" assignation="cityInModel1" userID="FLX" flexoID="40">
          <DataPropertyAssertion id="21" value="cityInModel2.name" dataPropertyURI="http://www.thalesgroup.com/openflexo/emf/model/city1/City/name" userID="FLX" flexoID="41" />
          <EMFModelSlot idref="3" />
        </AssignableAction_AddEMFObjectIndividual>
      </BehaviourControlGraph_AssignationAction>
    </ActionScheme>
    <DeletionScheme id="22" skipConfirmationPanel="false" name="deletion" width="800" label="deletion" height="600" userID="FLX" flexoID="7">
      <BehaviourControlGraph_Sequence id="23" userID="FLX" flexoID="237">
        <ControlGraph2_DeleteAction id="24" object="cityInModel2" ownerContext="controlGraph2" userID="FLX" flexoID="43" />
        <ControlGraph1_DeleteAction id="25" object="cityInModel1" ownerContext="controlGraph1" userID="FLX" flexoID="42" />
      </BehaviourControlGraph_Sequence>
    </DeletionScheme>
    <CreationScheme id="26" skipConfirmationPanel="false" name="createANewOne" width="800" label="createANewOne" height="600" userID="FLX" flexoID="189">
      <BehaviourControlGraph_Sequence id="27" userID="FLX" flexoID="238">
        <ControlGraph2_AssignationAction id="28" assign="cityInModel2" ownerContext="controlGraph2" userID="FLX" flexoID="240">
          <AssignableAction_AddEMFObjectIndividual id="29" assignation="cityInModel2" userID="FLX" flexoID="228">
            <DataPropertyAssertion id="30" value="parameters.cityName" dataPropertyURI="http://www.thalesgroup.com/openflexo/emf/model/city2/City/name" userID="FLX" flexoID="229" />
            <EMFModelSlot idref="5" />
          </AssignableAction_AddEMFObjectIndividual>
        </ControlGraph2_AssignationAction>
        <ControlGraph1_AssignationAction id="31" assign="cityInModel1" ownerContext="controlGraph1" userID="FLX" flexoID="239">
          <AssignableAction_AddEMFObjectIndividual id="32" assignation="cityInModel1" userID="FLX" flexoID="210">
            <DataPropertyAssertion id="33" value="parameters.cityName" dataPropertyURI="http://www.thalesgroup.com/openflexo/emf/model/city1/City/name" userID="FLX" flexoID="209" />
            <EMFModelSlot idref="3" />
          </AssignableAction_AddEMFObjectIndividual>
        </ControlGraph1_AssignationAction>
      </BehaviourControlGraph_Sequence>
      <GenericBehaviourParameter id="34" widget="TEXT_FIELD" name="cityName" type="java.lang.String" userID="FLX" flexoID="285" />
    </CreationScheme>
    <Inspector id="35" renderer="((instance.cityInModel1 != null) ? ((instance.cityInModel2 != null) ? (instance.cityInModel1.name + &quot; [sync]&quot;) : (instance.cityInModel1.name + &quot; [model1]&quot;)) : (instance.cityInModel2.name + &quot; [model2]&quot;))" inspectorTitle="City" userID="FLX" flexoID="1" />
    <Constraint id="36" constraint="(cityInModel1.name.toUpperCase = cityInModel2.name.toUpperCase)" userID="FLX" flexoID="32" />
  </FlexoConcept>
  <FlexoConcept id="37" name="House" isAbstract="true" userID="FLX" flexoID="44">
    <Inspector id="38" inspectorTitle="House" userID="FLX" flexoID="9" />
  </FlexoConcept>
  <FlexoConcept id="39" parentFlexoConceptsList="http://www.thalesgroup.com/openflexo/emf/CityMapping/Mapping#House" name="Appartment" userID="FLX" flexoID="50">
    <EMFObjectIndividualRole id="40" ontologicType="http://www.thalesgroup.com/openflexo/emf/model/city1/House" container="model1" cloningStrategy="Clone" cardinality="ZeroOne" name="houseInModel1" userID="FLX" flexoID="47">
      <EMFModelSlot idref="3" />
    </EMFObjectIndividualRole>
    <EMFObjectIndividualRole id="41" ontologicType="http://www.thalesgroup.com/openflexo/emf/model/city2/Appartment" container="model2" cloningStrategy="Clone" cardinality="ZeroOne" name="appartmentInModel2" userID="FLX" flexoID="48">
      <EMFModelSlot idref="5" />
    </EMFObjectIndividualRole>
    <FlexoConceptInstanceRole id="42" virtualModelInstance="virtualModelInstance" flexoConceptTypeURI="http://www.thalesgroup.com/openflexo/emf/CityMapping/Mapping#City" cloningStrategy="Reference" cardinality="ZeroOne" name="city" userID="FLX" flexoID="49" />
    <CreationScheme id="43" skipConfirmationPanel="false" name="creation" width="800" label="creation" height="600" userID="FLX" flexoID="15">
      <BehaviourControlGraph_Sequence id="44" userID="FLX" flexoID="241">
        <ControlGraph2_Sequence id="45" ownerContext="controlGraph2" userID="FLX" flexoID="244">
          <ControlGraph2_AssignationAction id="46" assign="city" ownerContext="controlGraph2" userID="FLX" flexoID="247">
            <AssignableAction_ExpressionAction id="47" expression="parameters.cityParameter" userID="FLX" flexoID="248" />
          </ControlGraph2_AssignationAction>
          <ControlGraph1_AssignationAction id="48" assign="appartmentInModel2" ownerContext="controlGraph1" userID="FLX" flexoID="245">
            <AssignableAction_ExpressionAction id="49" expression="parameters.appartmentInModel2" userID="FLX" flexoID="246" />
          </ControlGraph1_AssignationAction>
        </ControlGraph2_Sequence>
        <ControlGraph1_AssignationAction id="50" assign="houseInModel1" ownerContext="controlGraph1" userID="FLX" flexoID="242">
          <AssignableAction_ExpressionAction id="51" expression="parameters.houseInModel1" userID="FLX" flexoID="243" />
        </ControlGraph1_AssignationAction>
      </BehaviourControlGraph_Sequence>
      <GenericBehaviourParameter id="52" widget="CUSTOM_WIDGET" name="houseInModel1" type="org.openflexo.foundation.ontology.IFlexoOntologyIndividual" userID="FLX" flexoID="286" />
      <GenericBehaviourParameter id="53" widget="CUSTOM_WIDGET" name="appartmentInModel2" type="org.openflexo.foundation.ontology.IFlexoOntologyIndividual" userID="FLX" flexoID="287" />
      <GenericBehaviourParameter id="54" widget="CUSTOM_WIDGET" name="cityParameter" type="org.openflexo.foundation.fml.FlexoConceptInstanceType&lt;null&gt;" userID="FLX" flexoID="288" />
    </CreationScheme>
    <DeletionScheme id="55" skipConfirmationPanel="false" name="deletion" width="800" label="deletion" height="600" userID="FLX" flexoID="16">
      <BehaviourControlGraph_Sequence id="56" userID="FLX" flexoID="249">
        <ControlGraph2_DeleteAction id="57" object="appartmentInModel2" ownerContext="controlGraph2" userID="FLX" flexoID="55" />
        <ControlGraph1_DeleteAction id="58" object="houseInModel1" ownerContext="controlGraph1" userID="FLX" flexoID="54" />
      </BehaviourControlGraph_Sequence>
    </DeletionScheme>
    <Inspector id="59" renderer="(&quot;Appartment -  &quot; + ((instance.houseInModel1 != null) ? ((instance.appartmentInModel2 != null) ? (instance.houseInModel1.info + &quot; [sync]&quot;) : (instance.houseInModel1.info + &quot; [model1]&quot;)) : (instance.appartmentInModel2.label + &quot; [model2]&quot;)))" inspectorTitle="Appartment" userID="FLX" flexoID="12" />
    <Constraint id="60" constraint="(houseInModel1.type.name = &quot;Appartment&quot;)" userID="FLX" flexoID="45" />
    <Constraint id="61" constraint="(houseInModel1.info = appartmentInModel2.label)" userID="FLX" flexoID="46" />
  </FlexoConcept>
  <FlexoConcept id="62" parentFlexoConceptsList="http://www.thalesgroup.com/openflexo/emf/CityMapping/Mapping#House" name="Mansion" userID="FLX" flexoID="61">
    <EMFObjectIndividualRole id="63" ontologicType="http://www.thalesgroup.com/openflexo/emf/model/city1/House" container="model1" cloningStrategy="Clone" cardinality="ZeroOne" name="houseInModel1" userID="FLX" flexoID="58">
      <EMFModelSlot idref="3" />
    </EMFObjectIndividualRole>
    <EMFObjectIndividualRole id="64" ontologicType="http://www.thalesgroup.com/openflexo/emf/model/city2/Mansion" container="model2" cloningStrategy="Clone" cardinality="ZeroOne" name="mansionInModel2" userID="FLX" flexoID="59">
      <EMFModelSlot idref="5" />
    </EMFObjectIndividualRole>
    <FlexoConceptInstanceRole id="65" virtualModelInstance="virtualModelInstance" flexoConceptTypeURI="http://www.thalesgroup.com/openflexo/emf/CityMapping/Mapping#City" cloningStrategy="Reference" cardinality="ZeroOne" name="city" userID="FLX" flexoID="60" />
    <CreationScheme id="66" skipConfirmationPanel="false" name="creation" width="800" label="creation" height="600" userID="FLX" flexoID="21">
      <BehaviourControlGraph_Sequence id="67" userID="FLX" flexoID="250">
        <ControlGraph2_Sequence id="68" ownerContext="controlGraph2" userID="FLX" flexoID="253">
          <ControlGraph2_AssignationAction id="69" assign="city" ownerContext="controlGraph2" userID="FLX" flexoID="256">
            <AssignableAction_ExpressionAction id="70" expression="parameters.cityParameter" userID="FLX" flexoID="257" />
          </ControlGraph2_AssignationAction>
          <ControlGraph1_AssignationAction id="71" assign="mansionInModel2" ownerContext="controlGraph1" userID="FLX" flexoID="254">
            <AssignableAction_ExpressionAction id="72" expression="parameters.mansionInModel2" userID="FLX" flexoID="255" />
          </ControlGraph1_AssignationAction>
        </ControlGraph2_Sequence>
        <ControlGraph1_AssignationAction id="73" assign="houseInModel1" ownerContext="controlGraph1" userID="FLX" flexoID="251">
          <AssignableAction_ExpressionAction id="74" expression="parameters.houseInModel1" userID="FLX" flexoID="252" />
        </ControlGraph1_AssignationAction>
      </BehaviourControlGraph_Sequence>
      <GenericBehaviourParameter id="75" widget="CUSTOM_WIDGET" name="houseInModel1" type="org.openflexo.foundation.ontology.IFlexoOntologyIndividual" userID="FLX" flexoID="289" />
      <GenericBehaviourParameter id="76" widget="CUSTOM_WIDGET" name="mansionInModel2" type="org.openflexo.foundation.ontology.IFlexoOntologyIndividual" userID="FLX" flexoID="290" />
      <GenericBehaviourParameter id="77" widget="CUSTOM_WIDGET" name="cityParameter" type="org.openflexo.foundation.fml.FlexoConceptInstanceType&lt;null&gt;" userID="FLX" flexoID="291" />
    </CreationScheme>
    <DeletionScheme id="78" skipConfirmationPanel="false" name="deletion" width="800" label="deletion" height="600" userID="FLX" flexoID="22">
      <BehaviourControlGraph_Sequence id="79" userID="FLX" flexoID="258">
        <ControlGraph2_DeleteAction id="80" object="mansionInModel2" ownerContext="controlGraph2" userID="FLX" flexoID="66" />
        <ControlGraph1_DeleteAction id="81" object="houseInModel1" ownerContext="controlGraph1" userID="FLX" flexoID="65" />
      </BehaviourControlGraph_Sequence>
    </DeletionScheme>
    <Inspector id="82" renderer="(&quot;Mansion - &quot; + ((instance.houseInModel1 != null) ? ((instance.mansionInModel2 != null) ? (instance.houseInModel1.info + &quot; [sync]&quot;) : (instance.houseInModel1.info + &quot; [model1]&quot;)) : (instance.mansionInModel2.number.toString + &quot; [model2]&quot;)))" inspectorTitle="Mansion" userID="FLX" flexoID="18" />
    <Constraint id="83" constraint="(houseInModel1.type.name = &quot;Mansion&quot;)" userID="FLX" flexoID="56" />
    <Constraint id="84" constraint="(houseInModel1.info = mansionInModel2.number.toString)" userID="FLX" flexoID="57" />
  </FlexoConcept>
  <FlexoConcept id="85" name="Resident" isAbstract="true" userID="FLX" flexoID="70">
    <EMFObjectIndividualRole id="86" ontologicType="http://www.thalesgroup.com/openflexo/emf/model/city1/Resident" container="model1" cloningStrategy="Clone" cardinality="ZeroOne" name="residentInModel1" userID="FLX" flexoID="68">
      <EMFModelSlot idref="3" />
    </EMFObjectIndividualRole>
    <EMFObjectIndividualRole id="87" ontologicType="http://www.thalesgroup.com/openflexo/emf/model/city2/House" container="model2" cloningStrategy="Clone" cardinality="ZeroOne" name="houseInModel2" userID="FLX" flexoID="69">
      <EMFModelSlot idref="5" />
    </EMFObjectIndividualRole>
    <CreationScheme id="88" skipConfirmationPanel="false" name="creation" width="800" label="creation" height="600" userID="FLX" flexoID="30">
      <BehaviourControlGraph_Sequence id="89" userID="FLX" flexoID="259">
        <ControlGraph2_AssignationAction id="90" assign="houseInModel2" ownerContext="controlGraph2" userID="FLX" flexoID="262">
          <AssignableAction_ExpressionAction id="91" expression="parameters.houseInModel2" userID="FLX" flexoID="263" />
        </ControlGraph2_AssignationAction>
        <ControlGraph1_AssignationAction id="92" assign="residentInModel1" ownerContext="controlGraph1" userID="FLX" flexoID="260">
          <AssignableAction_ExpressionAction id="93" expression="parameters.residentInModel1" userID="FLX" flexoID="261" />
        </ControlGraph1_AssignationAction>
      </BehaviourControlGraph_Sequence>
      <GenericBehaviourParameter id="94" widget="CUSTOM_WIDGET" name="residentInModel1" type="org.openflexo.foundation.ontology.IFlexoOntologyIndividual" userID="FLX" flexoID="292" />
      <GenericBehaviourParameter id="95" widget="CUSTOM_WIDGET" name="houseInModel2" type="org.openflexo.foundation.ontology.IFlexoOntologyIndividual" userID="FLX" flexoID="293" />
    </CreationScheme>
    <Inspector id="96" renderer="((instance.residentInModel1 != null) ? ((instance.houseInModel2 != null) ? (instance.residentInModel1.name + &quot; [sync]&quot;) : (instance.residentInModel1.name + &quot; [model1]&quot;)) : (instance.houseInModel2.owner + &quot; [model2]&quot;))" inspectorTitle="Resident" userID="FLX" flexoID="24" />
    <Constraint id="97" constraint="(residentInModel1.name = houseInModel2.owner)" userID="FLX" flexoID="67" />
  </FlexoConcept>
  <FlexoConcept id="98" name="Mayor" userID="FLX" flexoID="73">
    <EMFObjectIndividualRole id="99" ontologicType="http://www.thalesgroup.com/openflexo/emf/model/city2/Mayor" container="model1" cloningStrategy="Clone" cardinality="ZeroOne" name="mayor" userID="FLX" description="" flexoID="271">
      <EMFModelSlot idref="5" />
    </EMFObjectIndividualRole>
    <Inspector id="100" inspectorTitle="Mayor" userID="FLX" flexoID="27" />
  </FlexoConcept>
  <ModelSlot_EMFModelSlot id="3" metaModelURI="http://www.thalesgroup.com/openflexo/emf/model/city1" isRequired="true" cloningStrategy="Reference" cardinality="ZeroOne" name="model1" userID="FLX" flexoID="161">
    <EMFModelSlot idref="3" />
  </ModelSlot_EMFModelSlot>
  <ModelSlot_EMFModelSlot id="5" metaModelURI="http://www.thalesgroup.com/openflexo/emf/model/city2" isRequired="true" cloningStrategy="Reference" cardinality="ZeroOne" name="model2" userID="FLX" flexoID="162">
    <EMFModelSlot idref="5" />
  </ModelSlot_EMFModelSlot>
  <SynchronizationScheme id="101" skipConfirmationPanel="false" name="synchronization" width="800" label="synchronization" height="600" userID="FLX" flexoID="74">
    <BehaviourControlGraph_Sequence id="102" userID="FLX" flexoID="4">
      <ControlGraph2_Sequence id="103" ownerContext="controlGraph2" userID="FLX" flexoID="27">
        <ControlGraph2_IterationAction id="104" iteratorName="city2" ownerContext="controlGraph2" userID="FLX" flexoID="36">
          <Iteration_SelectEMFObjectIndividual id="105" ontologyClassURI="http://www.thalesgroup.com/openflexo/emf/model/city2/City" ownerContext="iterationControlGraph" userID="FLX" flexoID="145">
            <EMFModelSlot idref="5" />
          </Iteration_SelectEMFObjectIndividual>
          <ControlGraph_Sequence id="106" ownerContext="controlGraph" userID="FLX" flexoID="33">
            <ControlGraph2_ConditionalAction id="107" condition="(matchingCitiesInModel1.size = 0)" ownerContext="controlGraph2" userID="FLX" flexoID="147">
              <ThenControlGraph_MatchFlexoConceptInstance id="108" creationSchemeURI="http://www.thalesgroup.com/openflexo/emf/CityMapping/Mapping#City.createFromEMF" virtualModelInstance="virtualModelInstance" ownerContext="thenControlGraph" userID="FLX" flexoID="150">
                <MatchingCriteria id="109" patternRoleName="cityInModel1" value="null" userID="FLX" flexoID="148" />
                <MatchingCriteria id="110" patternRoleName="cityInModel2" value="city2" userID="FLX" flexoID="149" />
                <CreateFlexoConceptInstanceParameter id="111" paramName="cityInModel1" value="null" userID="FLX" flexoID="151" />
                <CreateFlexoConceptInstanceParameter id="112" paramName="cityInModel2" value="city2" userID="FLX" flexoID="152" />
              </ThenControlGraph_MatchFlexoConceptInstance>
            </ControlGraph2_ConditionalAction>
            <ControlGraph1_DeclarationAction id="113" variable="matchingCitiesInModel1" ownerContext="controlGraph1" userID="FLX" flexoID="34">
              <AssignableAction_SelectEMFObjectIndividual id="114" ontologyClassURI="http://www.thalesgroup.com/openflexo/emf/model/city1/City" variableName="matchingCitiesInModel1" assignation="matchingCitiesInModel1" userID="FLX" flexoID="146">
                <Condition id="115" condition="(selected.name = city2.name)" userID="FLX" flexoID="35" />
                <EMFModelSlot idref="3" />
              </AssignableAction_SelectEMFObjectIndividual>
            </ControlGraph1_DeclarationAction>
          </ControlGraph_Sequence>
        </ControlGraph2_IterationAction>
        <ControlGraph1_IterationAction id="116" iteratorName="residentInModel1" ownerContext="controlGraph1" userID="FLX" flexoID="32">
          <Iteration_SelectEMFObjectIndividual id="117" ontologyClassURI="http://www.thalesgroup.com/openflexo/emf/model/city1/Resident" ownerContext="iterationControlGraph" userID="FLX" flexoID="130">
            <EMFModelSlot idref="3" />
          </Iteration_SelectEMFObjectIndividual>
          <ControlGraph_Sequence id="118" ownerContext="controlGraph" userID="FLX" flexoID="28">
            <ControlGraph2_Sequence id="119" ownerContext="controlGraph2" userID="FLX" flexoID="31">
              <ControlGraph2_ConditionalAction id="120" condition="(matchingHousesWithSameResident.size &gt;= 1)" ownerContext="controlGraph2" userID="FLX" flexoID="138">
                <ThenControlGraph_MatchFlexoConceptInstance id="121" creationSchemeURI="http://www.thalesgroup.com/openflexo/emf/CityMapping/Mapping#Resident.creation" virtualModelInstance="virtualModelInstance" ownerContext="thenControlGraph" name="" userID="FLX" flexoID="141">
                  <MatchingCriteria id="122" patternRoleName="residentInModel1" value="residentInModel1" userID="FLX" flexoID="139" />
                  <MatchingCriteria id="123" patternRoleName="houseInModel2" value="matchingHousesWithSameResident.get(0)" userID="FLX" flexoID="140" />
                  <CreateFlexoConceptInstanceParameter id="124" paramName="residentInModel1" value="residentInModel1" userID="FLX" flexoID="142" />
                  <CreateFlexoConceptInstanceParameter id="125" paramName="houseInModel2" value="matchingHousesWithSameResident.get(0)" userID="FLX" flexoID="143" />
                </ThenControlGraph_MatchFlexoConceptInstance>
              </ControlGraph2_ConditionalAction>
              <ControlGraph1_ConditionalAction id="126" condition="(matchingHousesWithSameResident.size = 0)" ownerContext="controlGraph1" userID="FLX" flexoID="132">
                <ThenControlGraph_MatchFlexoConceptInstance id="127" creationSchemeURI="http://www.thalesgroup.com/openflexo/emf/CityMapping/Mapping#Resident.creation" virtualModelInstance="virtualModelInstance" ownerContext="thenControlGraph" userID="FLX" flexoID="135">
                  <MatchingCriteria id="128" patternRoleName="residentInModel1" value="residentInModel1" userID="FLX" flexoID="133" />
                  <MatchingCriteria id="129" patternRoleName="houseInModel2" value="null" userID="FLX" flexoID="134" />
                  <CreateFlexoConceptInstanceParameter id="130" paramName="residentInModel1" value="residentInModel1" userID="FLX" flexoID="136" />
                  <CreateFlexoConceptInstanceParameter id="131" paramName="houseInModel2" value="null" userID="FLX" flexoID="137" />
                </ThenControlGraph_MatchFlexoConceptInstance>
              </ControlGraph1_ConditionalAction>
            </ControlGraph2_Sequence>
            <ControlGraph1_DeclarationAction id="132" variable="matchingHousesWithSameResident" ownerContext="controlGraph1" userID="FLX" flexoID="29">
              <AssignableAction_SelectEMFObjectIndividual id="133" ontologyClassURI="http://www.thalesgroup.com/openflexo/emf/model/city2/House" variableName="matchingHousesWithSameResident" assignation="matchingHousesWithSameResident" userID="FLX" flexoID="131">
                <Condition id="134" condition="(selected.owner.toUpperCase = residentInModel1.name.toUpperCase)" userID="FLX" flexoID="30" />
                <EMFModelSlot idref="5" />
              </AssignableAction_SelectEMFObjectIndividual>
            </ControlGraph1_DeclarationAction>
          </ControlGraph_Sequence>
        </ControlGraph1_IterationAction>
      </ControlGraph2_Sequence>
      <ControlGraph1_IterationAction id="135" iteratorName="city1" ownerContext="controlGraph1" userID="FLX" flexoID="26">
        <Iteration_SelectEMFObjectIndividual id="136" ontologyClassURI="http://www.thalesgroup.com/openflexo/emf/model/city1/City" ownerContext="iterationControlGraph" userID="FLX" flexoID="76">
          <EMFModelSlot idref="3" />
        </Iteration_SelectEMFObjectIndividual>
        <ControlGraph_Sequence id="137" ownerContext="controlGraph" userID="FLX" flexoID="5">
          <ControlGraph2_Sequence id="138" ownerContext="controlGraph2" userID="FLX" flexoID="8">
            <ControlGraph2_Sequence id="139" ownerContext="controlGraph2" userID="FLX" flexoID="9">
              <ControlGraph2_Sequence id="140" ownerContext="controlGraph2" userID="FLX" flexoID="10">
                <ControlGraph2_Sequence id="141" ownerContext="controlGraph2" userID="FLX" flexoID="13">
                  <ControlGraph2_IterationAction id="142" iteratorName="house1" ownerContext="controlGraph2" userID="FLX" flexoID="92">
                    <Iteration_ExpressionAction id="143" expression="city1.houses" ownerContext="iterationControlGraph" userID="FLX" flexoID="25" />
                    <ControlGraph_Sequence id="144" ownerContext="controlGraph" userID="FLX" flexoID="16">
                      <ControlGraph2_ConditionalAction id="145" condition="(house1.type.name = &quot;Mansion&quot;)" ownerContext="controlGraph2" userID="FLX" flexoID="111">
                        <ThenControlGraph_Sequence id="146" ownerContext="thenControlGraph" userID="FLX" flexoID="21">
                          <ControlGraph2_Sequence id="147" ownerContext="controlGraph2" userID="FLX" flexoID="24">
                            <ControlGraph2_ConditionalAction id="148" condition="(matchingMansionsInModel2.size = 1)" ownerContext="controlGraph2" userID="FLX" flexoID="121">
                              <ThenControlGraph_MatchFlexoConceptInstance id="149" creationSchemeURI="http://www.thalesgroup.com/openflexo/emf/CityMapping/Mapping#Mansion.creation" virtualModelInstance="virtualModelInstance" ownerContext="thenControlGraph" userID="FLX" flexoID="125">
                                <MatchingCriteria id="150" patternRoleName="houseInModel1" value="house1" userID="FLX" flexoID="122" />
                                <MatchingCriteria id="151" patternRoleName="mansionInModel2" value="matchingMansionsInModel2.get(0)" userID="FLX" flexoID="123" />
                                <MatchingCriteria id="152" patternRoleName="city" value="currentCity" userID="FLX" flexoID="124" />
                                <CreateFlexoConceptInstanceParameter id="153" paramName="houseInModel1" value="house1" userID="FLX" flexoID="126" />
                                <CreateFlexoConceptInstanceParameter id="154" paramName="mansionInModel2" value="matchingMansionsInModel2.get(0)" userID="FLX" flexoID="127" />
                                <CreateFlexoConceptInstanceParameter id="155" paramName="cityParameter" value="currentCity" userID="FLX" flexoID="128" />
                              </ThenControlGraph_MatchFlexoConceptInstance>
                            </ControlGraph2_ConditionalAction>
                            <ControlGraph1_ConditionalAction id="156" condition="(matchingMansionsInModel2.size = 0)" ownerContext="controlGraph1" userID="FLX" flexoID="113">
                              <ThenControlGraph_MatchFlexoConceptInstance id="157" creationSchemeURI="http://www.thalesgroup.com/openflexo/emf/CityMapping/Mapping#Mansion.creation" virtualModelInstance="virtualModelInstance" ownerContext="thenControlGraph" userID="FLX" flexoID="117">
                                <MatchingCriteria id="158" patternRoleName="houseInModel1" value="house1" userID="FLX" flexoID="114" />
                                <MatchingCriteria id="159" patternRoleName="mansionInModel2" value="null" userID="FLX" flexoID="115" />
                                <MatchingCriteria id="160" patternRoleName="city" value="currentCity" userID="FLX" flexoID="116" />
                                <CreateFlexoConceptInstanceParameter id="161" paramName="houseInModel1" value="house1" userID="FLX" flexoID="118" />
                                <CreateFlexoConceptInstanceParameter id="162" paramName="mansionInModel2" value="null" userID="FLX" flexoID="119" />
                                <CreateFlexoConceptInstanceParameter id="163" paramName="cityParameter" value="currentCity" userID="FLX" flexoID="120" />
                              </ThenControlGraph_MatchFlexoConceptInstance>
                            </ControlGraph1_ConditionalAction>
                          </ControlGraph2_Sequence>
                          <ControlGraph1_DeclarationAction id="164" variable="matchingMansionsInModel2" ownerContext="controlGraph1" userID="FLX" flexoID="22">
                            <AssignableAction_SelectEMFObjectIndividual id="165" ontologyClassURI="http://www.thalesgroup.com/openflexo/emf/model/city2/Mansion" variableName="matchingMansionsInModel2" assignation="matchingMansionsInModel2" userID="FLX" flexoID="112">
                              <Condition id="166" condition="(selected.number.toString = house1.info)" userID="FLX" flexoID="23" />
                              <EMFModelSlot idref="5" />
                            </AssignableAction_SelectEMFObjectIndividual>
                          </ControlGraph1_DeclarationAction>
                        </ThenControlGraph_Sequence>
                      </ControlGraph2_ConditionalAction>
                      <ControlGraph1_ConditionalAction id="167" condition="(house1.type.name = &quot;Appartment&quot;)" ownerContext="controlGraph1" userID="FLX" flexoID="93">
                        <ThenControlGraph_Sequence id="168" ownerContext="thenControlGraph" userID="FLX" flexoID="17">
                          <ControlGraph2_Sequence id="169" ownerContext="controlGraph2" userID="FLX" flexoID="20">
                            <ControlGraph2_ConditionalAction id="170" condition="(matchingAppartmentsInModel2.size = 1)" ownerContext="controlGraph2" userID="FLX" flexoID="103">
                              <ThenControlGraph_MatchFlexoConceptInstance id="171" creationSchemeURI="http://www.thalesgroup.com/openflexo/emf/CityMapping/Mapping#Appartment.creation" virtualModelInstance="virtualModelInstance" ownerContext="thenControlGraph" userID="FLX" flexoID="107">
                                <MatchingCriteria id="172" patternRoleName="houseInModel1" value="house1" userID="FLX" flexoID="104" />
                                <MatchingCriteria id="173" patternRoleName="appartmentInModel2" value="matchingAppartmentsInModel2.get(0)" userID="FLX" flexoID="105" />
                                <MatchingCriteria id="174" patternRoleName="city" value="currentCity" userID="FLX" flexoID="106" />
                                <CreateFlexoConceptInstanceParameter id="175" paramName="houseInModel1" value="house1" userID="FLX" flexoID="108" />
                                <CreateFlexoConceptInstanceParameter id="176" paramName="appartmentInModel2" value="matchingAppartmentsInModel2.get(0)" userID="FLX" flexoID="109" />
                                <CreateFlexoConceptInstanceParameter id="177" paramName="cityParameter" value="currentCity" userID="FLX" flexoID="110" />
                              </ThenControlGraph_MatchFlexoConceptInstance>
                            </ControlGraph2_ConditionalAction>
                            <ControlGraph1_ConditionalAction id="178" condition="(matchingAppartmentsInModel2.size = 0)" ownerContext="controlGraph1" userID="FLX" flexoID="95">
                              <ThenControlGraph_MatchFlexoConceptInstance id="179" creationSchemeURI="http://www.thalesgroup.com/openflexo/emf/CityMapping/Mapping#Appartment.creation" virtualModelInstance="virtualModelInstance" ownerContext="thenControlGraph" userID="FLX" flexoID="99">
                                <MatchingCriteria id="180" patternRoleName="houseInModel1" value="house1" userID="FLX" flexoID="96" />
                                <MatchingCriteria id="181" patternRoleName="appartmentInModel2" value="null" userID="FLX" flexoID="97" />
                                <MatchingCriteria id="182" patternRoleName="city" value="currentCity" userID="FLX" flexoID="98" />
                                <CreateFlexoConceptInstanceParameter id="183" paramName="houseInModel1" value="house1" userID="FLX" flexoID="100" />
                                <CreateFlexoConceptInstanceParameter id="184" paramName="appartmentInModel2" value="null" userID="FLX" flexoID="101" />
                                <CreateFlexoConceptInstanceParameter id="185" paramName="cityParameter" value="currentCity" userID="FLX" flexoID="102" />
                              </ThenControlGraph_MatchFlexoConceptInstance>
                            </ControlGraph1_ConditionalAction>
                          </ControlGraph2_Sequence>
                          <ControlGraph1_DeclarationAction id="186" variable="matchingAppartmentsInModel2" ownerContext="controlGraph1" userID="FLX" flexoID="18">
                            <AssignableAction_SelectEMFObjectIndividual id="187" ontologyClassURI="http://www.thalesgroup.com/openflexo/emf/model/city2/Appartment" variableName="matchingAppartmentsInModel2" assignation="matchingAppartmentsInModel2" userID="FLX" flexoID="94">
                              <Condition id="188" condition="(selected.label = house1.info)" userID="FLX" flexoID="19" />
                              <EMFModelSlot idref="5" />
                            </AssignableAction_SelectEMFObjectIndividual>
                          </ControlGraph1_DeclarationAction>
                        </ThenControlGraph_Sequence>
                      </ControlGraph1_ConditionalAction>
                    </ControlGraph_Sequence>
                  </ControlGraph2_IterationAction>
                  <ControlGraph1_DeclarationAction id="189" variable="currentCity" ownerContext="controlGraph1" userID="FLX" flexoID="14">
                    <AssignableAction_ExpressionAction id="190" expression="tempList.get(0)" userID="FLX" flexoID="15" />
                  </ControlGraph1_DeclarationAction>
                </ControlGraph2_Sequence>
                <ControlGraph1_DeclarationAction id="191" variable="tempList" ownerContext="controlGraph1" userID="FLX" flexoID="11">
                  <AssignableAction_SelectFlexoConceptInstance id="192" virtualModelInstance="virtualModelInstance" flexoConceptTypeURI="http://www.thalesgroup.com/openflexo/emf/CityMapping/Mapping#City" variableName="tempList" assignation="tempList" userID="FLX" flexoID="90">
                    <Condition id="193" condition="(selected.cityInModel1 = city1)" userID="FLX" flexoID="12" />
                  </AssignableAction_SelectFlexoConceptInstance>
                </ControlGraph1_DeclarationAction>
              </ControlGraph2_Sequence>
              <ControlGraph1_ConditionalAction id="194" condition="(matchingCitiesInModel2.size = 1)" ownerContext="controlGraph1" userID="FLX" flexoID="84">
                <ThenControlGraph_MatchFlexoConceptInstance id="195" creationSchemeURI="http://www.thalesgroup.com/openflexo/emf/CityMapping/Mapping#City.createFromEMF" virtualModelInstance="virtualModelInstance" ownerContext="thenControlGraph" userID="FLX" flexoID="87">
                  <MatchingCriteria id="196" patternRoleName="cityInModel1" value="city1" userID="FLX" flexoID="85" />
                  <MatchingCriteria id="197" patternRoleName="cityInModel2" value="matchingCitiesInModel2.get(0)" userID="FLX" flexoID="86" />
                  <CreateFlexoConceptInstanceParameter id="198" paramName="cityInModel1" value="city1" userID="FLX" flexoID="88" />
                  <CreateFlexoConceptInstanceParameter id="199" paramName="cityInModel2" value="matchingCitiesInModel2.get(0)" userID="FLX" flexoID="89" />
                </ThenControlGraph_MatchFlexoConceptInstance>
              </ControlGraph1_ConditionalAction>
            </ControlGraph2_Sequence>
            <ControlGraph1_ConditionalAction id="200" condition="(matchingCitiesInModel2.size = 0)" ownerContext="controlGraph1" userID="FLX" flexoID="78">
              <ThenControlGraph_MatchFlexoConceptInstance id="201" creationSchemeURI="http://www.thalesgroup.com/openflexo/emf/CityMapping/Mapping#City.createFromEMF" virtualModelInstance="virtualModelInstance" ownerContext="thenControlGraph" name="" userID="FLX" flexoID="81">
                <MatchingCriteria id="202" patternRoleName="cityInModel1" value="city1" userID="FLX" flexoID="79" />
                <MatchingCriteria id="203" patternRoleName="cityInModel2" value="null" userID="FLX" flexoID="80" />
                <CreateFlexoConceptInstanceParameter id="204" paramName="cityInModel1" value="city1" userID="FLX" flexoID="82" />
                <CreateFlexoConceptInstanceParameter id="205" paramName="cityInModel2" value="null" userID="FLX" flexoID="83" />
              </ThenControlGraph_MatchFlexoConceptInstance>
            </ControlGraph1_ConditionalAction>
          </ControlGraph2_Sequence>
          <ControlGraph1_DeclarationAction id="206" variable="matchingCitiesInModel2" ownerContext="controlGraph1" userID="FLX" flexoID="6">
            <AssignableAction_SelectEMFObjectIndividual id="207" ontologyClassURI="http://www.thalesgroup.com/openflexo/emf/model/city2/City" variableName="matchingCitiesInModel2" assignation="matchingCitiesInModel2" userID="FLX" flexoID="77">
              <Condition id="208" condition="(selected.name.toUpperCase = city1.name.toUpperCase)" userID="FLX" flexoID="7" />
              <EMFModelSlot idref="5" />
            </AssignableAction_SelectEMFObjectIndividual>
          </ControlGraph1_DeclarationAction>
        </ControlGraph_Sequence>
      </ControlGraph1_IterationAction>
    </BehaviourControlGraph_Sequence>
  </SynchronizationScheme>
  <ActionScheme id="209" skipConfirmationPanel="false" name="synchronizeModel2FromModel1" width="800" label="Synchronize model2 from model 1" height="600" userID="FLX" flexoID="153">
    <BehaviourControlGraph_Sequence id="210" userID="FLX" flexoID="37">
      <ControlGraph2_IterationAction id="211" iteratorName="nonExistantCity" ownerContext="controlGraph2" userID="FLX" flexoID="155">
        <Iteration_ExpressionAction id="212" expression="nonExistantCitiesInModel2" ownerContext="iterationControlGraph" userID="FLX" flexoID="41" />
        <ControlGraph_ExpressionAction id="213" expression="nonExistantCity.generateModel2FromModel1()" ownerContext="controlGraph" userID="FLX" flexoID="40" />
      </ControlGraph2_IterationAction>
      <ControlGraph1_DeclarationAction id="214" variable="nonExistantCitiesInModel2" ownerContext="controlGraph1" userID="FLX" flexoID="38">
        <AssignableAction_SelectFlexoConceptInstance id="215" virtualModelInstance="virtualModelInstance" flexoConceptTypeURI="http://www.thalesgroup.com/openflexo/emf/CityMapping/Mapping#City" variableName="nonExistantCitiesInModel2" assignation="nonExistantCitiesInModel2" userID="FLX" flexoID="154">
          <Condition id="216" condition="(selected.cityInModel2 = null)" userID="FLX" flexoID="39" />
        </AssignableAction_SelectFlexoConceptInstance>
      </ControlGraph1_DeclarationAction>
    </BehaviourControlGraph_Sequence>
  </ActionScheme>
  <ActionScheme id="217" skipConfirmationPanel="false" name="synchronizeModel1FromModel2" width="800" label="synchronizeModel1FromModel2" height="600" userID="FLX" flexoID="157">
    <BehaviourControlGraph_Sequence id="218" userID="FLX" flexoID="42">
      <ControlGraph2_IterationAction id="219" iteratorName="nonExistingCity" ownerContext="controlGraph2" userID="FLX" flexoID="159">
        <Iteration_ExpressionAction id="220" expression="nonExistingCitiesInModel1" ownerContext="iterationControlGraph" userID="FLX" flexoID="46" />
        <ControlGraph_ExpressionAction id="221" expression="nonExistingCity.generateModel1FromModel2()" ownerContext="controlGraph" userID="FLX" flexoID="45" />
      </ControlGraph2_IterationAction>
      <ControlGraph1_DeclarationAction id="222" variable="nonExistingCitiesInModel1" ownerContext="controlGraph1" userID="FLX" flexoID="43">
        <AssignableAction_SelectFlexoConceptInstance id="223" virtualModelInstance="virtualModelInstance" flexoConceptTypeURI="http://www.thalesgroup.com/openflexo/emf/CityMapping/Mapping#City" variableName="nonExistingCitiesInModel1" assignation="nonExistingCitiesInModel1" userID="FLX" flexoID="158">
          <Condition id="224" condition="(selected.cityInModel1 = null)" userID="FLX" flexoID="44" />
        </AssignableAction_SelectFlexoConceptInstance>
      </ControlGraph1_DeclarationAction>
    </BehaviourControlGraph_Sequence>
  </ActionScheme>
  <CreationScheme id="225" name="create" width="800" label="create" height="600" userID="FLX" flexoID="275">
    <BehaviourControlGraph_Sequence id="226" userID="FLX" flexoID="294">
      <ControlGraph2_AssignationAction id="227" assign="model2" ownerContext="controlGraph2" userID="FLX" flexoID="282">
        <AssignableAction_ExpressionAction id="228" expression="parameters.city2.getResourceData(null)" userID="FLX" flexoID="281" />
      </ControlGraph2_AssignationAction>
      <ControlGraph1_AssignationAction id="229" assign="model1" ownerContext="controlGraph1" userID="FLX" flexoID="280">
        <AssignableAction_ExpressionAction id="230" expression="parameters.city1.getResourceData(null)" userID="FLX" flexoID="279" />
      </ControlGraph1_AssignationAction>
    </BehaviourControlGraph_Sequence>
    <GenericBehaviourParameter id="231" isRequired="true" widget="CUSTOM_WIDGET" name="city1" type="org.openflexo.foundation.resource.FlexoResourceType&lt;org.openflexo.technologyadapter.emf.model.EMFModel&gt;" userID="FLX" flexoID="276" />
    <GenericBehaviourParameter id="232" isRequired="true" widget="CUSTOM_WIDGET" name="city2" type="org.openflexo.foundation.resource.FlexoResourceType&lt;org.openflexo.technologyadapter.emf.model.EMFModel&gt;" userID="FLX" flexoID="277" />
  </CreationScheme>
  <Inspector id="233" inspectorTitle="CityMapping" userID="FLX" flexoID="3" />
</VirtualModel>
